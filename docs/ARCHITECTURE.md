# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Tuberry

–ü—É–±–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ https://tuberry.ru. –ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã, –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∏ –∫–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è.

## –ö–æ–º–ø–æ–∑–∏—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
```
+------------+        +-------------------+        +-------------------+
|  Telegram  | <----> |  masterbot (Py)   | -----> |  FastAPI backend  |
+------------+        +-------------------+        +-------------------+
       ^                          |                           |
       |                          v                           v
       |                   Redis task queue            PostgreSQL / Redis
       |                          |                           |
       |                          v                           |
       |                   worker (Py) <----------------------+------+
       |                          |                                  |
       v                          v                                  |
+------------+        +-------------------+        +-------------------+
|   Browser  | <----> |  Next.js frontend | <----> |   Caddy proxy     |
+------------+        +-------------------+        +-------------------+
       |
       v
+-----------------+
|  Avito REST API |
+-----------------+
```

### –°–æ—Å—Ç–∞–≤
- **frontend** (`frontend/`) ‚Äî Next.js 14 (App Router). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç JWT –∏–∑ `localStorage`, SSR-—á–∞—Å—Ç—å —Ö–æ–¥–∏—Ç –∫ API –ø–æ `NEXT_INTERNAL_API_URL`.
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `app/(dashboard)/client/*`: –æ–±—â–∏–π `ClientShell` —Å—Ç—Ä–æ–∏—Ç –±–æ–∫–æ–≤—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞ `@reui/accordion-menu`, –¥–æ–±–∞–≤–ª—è–µ—Ç CTA-–±–ª–æ–∫–∏ –∏ logout.
  - –†–∞–∑–¥–µ–ª—ã –∫–∞–±–∏–Ω–µ—Ç–∞ (`/client`, `/client/settings`, `/client/analytics`, `/client/reports`, `/client/automations`, `/client/integrations`, `/client/billing`, `/client/support`) –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã —á–µ—Ä–µ–∑ reui-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Ç–∞–±–ª–∏—Ü—ã, –∞–ª–µ—Ä—Ç—ã, –∫–∞—Ä—Ç–æ—á–∫–∏) –∏ —Å–ª—É–∂–∞—Ç –∑–∞–≥–ª—É—à–∫–∞–º–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.
  - –ü—Ä–æ–∫—Å–∏-—Ä–æ—É—Ç `app/api/[...path]/route.ts` –ø—Ä–æ–∫–∏–¥—ã–≤–∞–µ—Ç –ª—é–±–æ–π REST-–∑–∞–ø—Ä–æ—Å –Ω–∞ FastAPI, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É —Ñ—Ä–æ–Ω—Ç –∏ API –∂–∏–≤—É—Ç –Ω–∞ –æ–¥–Ω–æ–º origin –∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–æ–∫—Å–∏.
- **backend** (`backend/app/`) ‚Äî FastAPI + SQLModel. –≠–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç REST, Telegram/Avito –≤–µ–±—Ö—É–∫–∏, —Ñ–æ–Ω–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ë–î.
- **projects** ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ—Å–ª–æ–π–∫–∞ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏. –ü—Ä–æ–µ–∫—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç Telegram-–±–æ—Ç–∞ –∏ —Ä–∞–±–æ—á–∏–π —á–∞—Ç, —Ö—Ä–∞–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫–∞ –∏ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤. Slug –æ—Å—Ç–∞—ë—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –ø–æ–ª–µ–º, –∞ —Ñ–ª–∞–≥ ¬´—Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏) –∏ —Ç–µ–ø–µ—Ä—å —Å–ª—É–∂–∏—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤: –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ª–∏—á–∏—è —Ü–∏—Ç–∞—Ç—ã ‚Äî –æ—Ç–≤–µ—Ç—ã –≤—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—É—á–∞—Ç–µ–ª—é.
- **worker** (`backend/app/worker.py`) ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—á–µ—Ä–µ–¥–∏ (`tuberry:tasks` –≤ Redis). –°–µ–π—á–∞—Å –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏ `avito.send_message`.
- **masterbot** (`backend/app/workers/master_bot.py`) ‚Äî Telegram-–±–æ—Ç –Ω–∞ aiogram, —Å–ª—É—à–∞–µ—Ç `/start` —á–µ—Ä–µ–∑ long polling –∏ –≤—ã–¥–∞—ë—Ç `link_token`.
- **postgres** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î (–¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–≤, –±–æ—Ç—ã, Avito-–∞–∫–∫–∞—É–Ω—Ç—ã, –¥–∏–∞–ª–æ–≥–∏, —Å–æ–æ–±—â–µ–Ω–∏—è).
- **redis** ‚Äî —Ö—Ä–∞–Ω–∏—Ç –∑–∞–¥–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –∏ –∫—ç—à–∏ AvitoService.
- **proxy** (`deploy/Caddyfile`) ‚Äî Caddy 2, –≤—ã–ø–æ–ª–Ω—è–µ—Ç TLS-—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—é –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é `/api/*` ‚Üí backend, –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ ‚Üí frontend.
- **Avito polling** ‚Äî –≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å (—Å–º. `samples/poller.py` –∏ –ø—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏), –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ Avito API –∏ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ backend.

## Backend: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π
- `app/main.py` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI: –ø–æ–¥–∫–ª—é—á–∞–µ—Ç —Ä–æ—É—Ç–µ—Ä—ã (`auth`, `clients`, `projects`, `bots`, `dialogs`, `avito`, `admin`, `webhooks`), –Ω–∞ —Å—Ç–∞—Ä—Ç–µ –≤—ã–∑—ã–≤–∞–µ—Ç `init_db()` (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü SQLModel).
- `app/routes/*` ‚Äî HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã. –ö–ª—é—á–µ–≤—ã–µ:
  - `auth` ‚Äî Telegram Login, –∞–¥–º–∏–Ω—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –æ–±–º–µ–Ω `link_token`.
  - `bots` ‚Äî CRUD, –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è `webhook_secret`, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ Telegram.
  - `projects` ‚Äî CRUD –ø—Ä–æ–µ–∫—Ç–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫–æ–≤/—Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø—Ä–∏–≤—è–∑–∫–∞ –±–æ—Ç–æ–≤.
  - `avito` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á—ë—Ç–∫–∞–º–∏ Avito (client_id/client_secret, —Å–≤—è–∑—å —Å –±–æ—Ç–æ–º/–ø—Ä–æ–µ–∫—Ç–æ–º).
  - `webhooks` ‚Äî –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ Telegram (`/telegram/{bot_id}/{secret}`) –∏ –∏–∑ Avito (`/avito`).
  - `dialogs` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤, —Ä—É—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.
  - `admin` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.
- `app/services/*` ‚Äî –¥–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞:
  - `AuthService` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å Telegram Login, —Ä–µ—à–∞–µ—Ç –∫–∞–∫–∏–µ —Ä–æ–ª–∏ –≤—ã–¥–∞–≤–∞—Ç—å.
- `DialogService` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –ø–ª–æ—â–∞–¥–∫–∞–º–∏, —Å–æ–∑–¥–∞—ë—Ç –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç Telegram topics, –ø–∏—à–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤ –ë–î, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤–ª–æ–∂–µ–Ω–∏—è (—Ç–µ–∫—Å—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≥–æ–ª–æ—Å–æ–≤—ã–µ) –∏–∑ Avito –≤ Telegram –∏ –æ–±—Ä–∞—Ç–Ω–æ (–∏–∑ Telegram –≤ Avito ‚Äî —Ç–µ–∫—Å—Ç –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫–æ–º (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á, –∑–∞–¥–µ—Ä–∂–∫–∞ ~75‚ÄØ—Å, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ ¬´–æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª¬ª). –°–µ—Ä–≤–∏—Å —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ —Ä–∞–±–æ—á–∏—Ö —Ç–æ–ø–∏–∫–∞—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –∞–¥—Ä–µ—Å–∞—Ç–∞–º (–≤ Avito –∏–ª–∏ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram), —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∏–∞–ª–æ–≥–∞. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞, –ø–æ—ç—Ç–æ–º—É —Ñ–∏–ª—å—Ç—Ä—ã –∏ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã —Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ `projects`.
  - `TelegramService` ‚Äî thin-–∫–ª–∏–µ–Ω—Ç –∫ Bot API (sendMessage, createForumTopic, setWebhook –∏ —Ç.–¥.).
  - `AvitoService` ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –∫–ª–∏–µ–Ω—Ç –∫ Avito Messenger API: –ø–æ–ª—É—á–∞–µ—Ç access_token –ø–æ client_credentials, –∫—ç—à–∏—Ä—É–µ—Ç `user_id`, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (`/messenger/v1/.../messages`) –∏ –ø–æ–º–µ—á–∞–µ—Ç –∏—Ö –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏ (`/read`).
  - `TaskQueue` ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ Redis (`rpush`/`blpop`) –¥–ª—è –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á.
- `app/repositories/*` ‚Äî –¥–æ—Å—Ç—É–ø –∫ –ë–î —á–µ—Ä–µ–∑ SQLModel (–±–æ—Ç—ã, –¥–∏–∞–ª–æ–≥–∏, —Å–æ–æ–±—â–µ–Ω–∏—è, Avito-–∞–∫–∫–∞—É–Ω—Ç—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏).
- `app/models/*` ‚Äî —Å—Ö–µ–º—ã SQLModel (–≤–∫–ª—é—á–∞—è `Bot.webhook_secret`, `Dialog.telegram_topic_id`, `Message.direction`/`status`).
- `app/scripts/seed.py` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –¥–µ–º–æ-–∫–ª–∏–µ–Ω—Ç–∞ –∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞.

## Frontend
- `app/login/page.tsx` ‚Äî –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram. –ü–æ—Å–ª–µ —É–¥–∞—á–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç JWT –≤ `localStorage` –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –≤ –ø—Ä–æ—Ñ–∏–ª—å.
- `app/(dashboard)/client/*` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–ª–∏–µ–Ω—Ç–∞: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–æ–≤, Avito-–∞–∫–∫–∞—É–Ω—Ç–æ–≤, —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤.
- `app/(dashboard)/admin/*` ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (–º–µ—Ç—Ä–∏–∫–∏, —Å–ø–∏—Å–æ–∫ —Å—É—â–Ω–æ—Å—Ç–µ–π).
- `app/lib/api.ts` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π fetch-—Ö–µ–ª–ø–µ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–π URL –∏ JWT).
- UI —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω Tailwind-–∫–ª–∞—Å—Å–∞–º–∏ (—á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Server Components Next.js.

## –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### Telegram Login
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞.
2. JS-SDK Telegram –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–ø–∏—Å—å –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ.
3. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—ã–∑—ã–≤–∞–µ—Ç `POST /api/auth/telegram`.
4. `AuthService` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç HMAC (`sha256(MASTER_BOT_TOKEN)`), –∏—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `telegram_user_id`.
5. –í –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç JWT (`expires` = `JWT_EXPIRES` —Å–µ–∫—É–Ω–¥). –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `localStorage` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö.

### –û–Ω–±–æ—Ä–¥–∏–Ω–≥ —á–µ—Ä–µ–∑ –º–∞—Å—Ç–µ—Ä-–±–æ—Ç–∞
1. –ö–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç `/start` –±–æ—Ç—É `@vishenka_play_bot`.
2. –ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/api/auth/master/link`, –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π `link_token` –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É `https://tuberry.ru/login?token=<...>`.
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST /api/auth/master/exchange` —Å email/–∏–º–µ–Ω–µ–º.
4. Backend —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é `owner` –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç `telegram_user_id`, –≤—ã–¥–∞—ë—Ç JWT.

### –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è Avito ‚Üí Telegram
1. –í–Ω–µ—à–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å (poller) –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ Avito API (`/messenger/v2/accounts/{user_id}/chats?unread_only=true`).
2. –î–ª—è –∫–∞–∂–¥–æ–π –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `DialogService.handle_avito_message(...)`:
   - –∏—â–µ–º Avito-–∞–∫–∫–∞—É–Ω—Ç (`avito_accounts`), –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤—è–∑—å —Å –±–æ—Ç–æ–º;
   - –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ —Å–æ–∑–¥–∞—ë–º `Dialog`, –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π Telegram topic –∏ –ø–∏–Ω —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è;
   - —Ä–∞–∑–±–∏—Ä–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è: —Ç–µ–∫—Å—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è; –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏—Ö –≤ Telegram (`sendMessage`/`sendPhoto`/`sendVoice` —Å `message_thread_id`);
    - —Ñ–∏–∫—Å–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–µ `messages` (direction=`avito`) —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –≤–ª–æ–∂–µ–Ω–∏–π;
    - –µ—Å–ª–∏ —É –∫–ª–∏–µ–Ω—Ç–∞ –≤–∫–ª—é—á—ë–Ω –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç, –ø–ª–∞–Ω–∏—Ä—É–µ–º –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ~75‚ÄØ—Å) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–º–µ—Ç–∫—É, —á—Ç–æ–±—ã –æ—Ç–≤–µ—á–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ –∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª.
3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ poller –≤—ã–∑—ã–≤–∞–µ—Ç `POST /messenger/v1/.../read`, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å —á–∞—Ç –∏–∑ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö.
4. –í—Å—è –ª–æ–≥–∏–∫–∞ Avito/Telegram —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–∞ –≤ `DialogService`, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É poller –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç (`samples/poller.py`) –∏–ª–∏ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ–π.

### –ò—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram ‚Üí Avito
1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram-—Ç–æ–ø–∏–∫–µ. –í–µ–±—Ö—É–∫ `POST /api/webhooks/telegram/{bot_id}/{secret}` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞–ø–¥–µ–π—Ç, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç `webhook_secret` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `DialogService.handle_telegram_message(...)`.
2. –°–µ—Ä–≤–∏—Å –Ω–∞—Ö–æ–¥–∏—Ç `Dialog` –ø–æ `message_thread_id`, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≤–ª–æ–∂–µ–Ω–∏—è –≤ `messages` (direction=`telegram`) –∏ —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á–∏ –≤ Redis `avito.send_message` (–æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π).
3. Worker –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–∞–¥–∞—á—É: –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `AvitoService.send_message(...)`, –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª –∏–∑ Telegram, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ `/messenger/v1/accounts/{user_id}/uploadImages` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST /messages/image`.
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ª–æ–≥–∏ –ø–∏—à–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç, Avito-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—Ç–≤–µ—Ç; –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∫–µ—à–∏—Ä—É—é—Ç—Å—è –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏. –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω —Ä–∞–±–æ—á–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –∑–∞–¥–∞—á–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (–¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —ç—Ç–æ ¬´–æ—Ç–≤–µ—Ç —É–∂–µ –¥–∞–Ω¬ª, –ø–æ—ç—Ç–æ–º—É –Ω–æ–≤—ã–π –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç –Ω–µ —Å—Ç–∞–≤–∏—Ç—Å—è).

### Telegram-–∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–ª–∏—á–∫–∞ ‚Üî —Ä–∞–±–æ—á–∞—è –≥—Ä—É–ø–ø–∞)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º—É –±–æ—Ç—É (–∏—Å—Ç–æ—á–Ω–∏–∫—É) –≤ –ª–∏—á–∫—É. –í–µ–±—Ö—É–∫ `POST /api/webhooks/source-telegram/{source_id}/{secret}` –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ, `TelegramSourceService` –Ω–∞—Ö–æ–¥–∏—Ç/—Å–æ–∑–¥–∞—ë—Ç `Dialog` —Å —Ç–∏–ø–æ–º `telegram`, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ñ–æ—Ä—É–º–Ω—ã–π —Ç–æ–ø–∏–∫ –≤ —Ä–∞–±–æ—á–µ–π –≥—Ä—É–ø–ø–µ (–µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É–¥–∞–ª–∏–ª–∏) –∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ–º–µ—Ç–∫–æ–π ¬´üí¨ –ö–ª–∏–µ–Ω—Ç ‚Ä¶¬ª.
2. –û–ø–µ—Ä–∞—Ç–æ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –≤ —Ç–æ–º –∂–µ —Ç–æ–ø–∏–∫–µ. Telegram –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –∞–ø–¥–µ–π—Ç —Å —Ç–µ–º –∂–µ `source_id`. –°–µ—Ä–≤–∏—Å –ø–æ–¥–±–∏—Ä–∞–µ—Ç –¥–∏–∞–ª–æ–≥ –ø–æ `message_thread_id` (–∏–ª–∏ –±–µ—Ä—ë—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ —á–∞—Ç—É), —Å–∫–∞—á–∏–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–∏—è –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `handle_manager_reply`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç/—Ñ–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –ª–∏—á–∫—É –æ—Ç –∏–º–µ–Ω–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
3. –ï—Å–ª–∏ —Ä–∞–±–æ—á–∏–π —Ç–æ–ø–∏–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (—É–¥–∞–ª—ë–Ω –≤—Ä—É—á–Ω—É—é –ª–∏–±–æ –Ω–µ –Ω–∞–π–¥–µ–Ω), —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π (`createForumTopic`), –≤ –Ω–µ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ—Ç–≤–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –¢–µ–º–∞ General –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
4. –í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ü–∏—Ç–∞—Ç ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ¬´—Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø–æ–¥—Å–∫–∞–∑–∫–∞ –≤ UI.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ Telegram
- –ü—É—Ç—å: `/api/webhooks/telegram/{bot_id}/{webhook_secret}`. `bot_id` ‚Äî –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á –≤ —Ç–∞–±–ª–∏—Ü–µ `bots`, `webhook_secret` —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–∞–º –∂–µ.
- `Bots` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–µ–∫—Ä–µ—Ç (`token_urlsafe(16)`), –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ webhook —Å–µ–∫—Ä–µ—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è.
- –ï—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç, backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –∏ –ø–∏—à–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥.
- –ö–æ–º–∞–Ω–¥–∞ `/getid` –≤ –ª—é–±–æ–º —á–∞—Ç–µ –æ—Ç–≤–µ—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Å `chat_id` –∏, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏, `Thread ID`.

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
- **clients** ‚Äî —é—Ä–ª–∏—Ü–∞/–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞; —Ö—Ä–∞–Ω—è—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.
- **projects** ‚Äî —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∏–µ–Ω—Ç–∞. –§–∏–∫—Å–∏—Ä—É—é—Ç —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –±–æ—Ç–∞ (`bot_id`), slug/–æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–∞–≤–∏–ª–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—á–∏–∫–∞ –∏ —à–∞–±–ª–æ–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è.
- **users** ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏; —Å–æ–¥–µ—Ä–∂–∞—Ç `role`, `telegram_user_id`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π `client_id`.
- **bots** ‚Äî Telegram-–±–æ—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤: `token`, `bot_username`, `group_chat_id`, `topic_mode`, `webhook_secret`, `status`.
- **avito_accounts** ‚Äî —Å–≤—è–∑—å –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–æ–º –∏ Avito: `project_id`, OAuth-–∫—Ä–µ–¥—ã (`api_client_id`, `api_client_secret`), `access_token`, `token_expires_at`, `bot_id`, —Ñ–ª–∞–≥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
- **dialogs** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è Avito-—á–∞—Ç ‚Üî Telegram topic. –ü–æ–ª—è `project_id`, `telegram_topic_id`, `telegram_chat_id`, `last_message_at`, `auto_reply_last_sent_at`.
- **messages** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏. –ü–æ–ª—è `direction` (`avito` / `telegram`), `status` (`delivered` / `sent`), –∏—Å—Ö–æ–¥–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π, —Ñ–ª–∞–≥ `is_auto_reply`.
- **events/audit** ‚Äî –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **Telegram Bot API** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è webhook, –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–ø–∏–∫–∞–º–∏. –ë–∞–∑–æ–≤—ã–π URL –∑–∞–¥–∞—ë—Ç—Å—è `TELEGRAM_API_BASE`.
- **Avito API** ‚Äî –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `avito_accounts`. –ó–∞–ø—Ä–æ—Å access_token –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ `client_credentials`. –ë–∞–∑–æ–≤—ã–π URL —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ `AVITO_API_BASE`.
- **Redis** ‚Äî –∫–∞–Ω–∞–ª –æ–±–º–µ–Ω–∞ –º–µ–∂–¥—É –≤–µ–±—Ö—É–∫–∞–º–∏ –∏ –≤–æ—Ä–∫–µ—Ä–æ–º, –∞ —Ç–∞–∫–∂–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –∫—ç—à–µ–π –≤ `AvitoService`.
- **Let‚Äôs Encrypt / Caddy** ‚Äî –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π TLS –¥–ª—è `tuberry.ru`.

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ä–∏—Å–∫–∏
- –ü–æ–ª–ª–µ—Ä Avito —Å–µ–π—á–∞—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é (—Å–º. `docs/OPERATIONS.md`). –î–ª—è –ø—Ä–æ–¥-–æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –µ–≥–æ –∫–∞–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å.
- –ú–∏–≥—Ä–∞—Ü–∏–π —Å—Ö–µ–º—ã (Alembic) –Ω–µ—Ç ‚Äî –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ JWT –±–µ–∑ refresh-—Ç–æ–∫–µ–Ω–æ–≤ –∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∏—Å–ª–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç: —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `docker compose logs` –∏ –∑–¥—Ä–∞–≤–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
